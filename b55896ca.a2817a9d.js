(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{191:function(e,n,a){"use strict";a.r(n),a.d(n,"frontMatter",(function(){return r})),a.d(n,"rightToc",(function(){return i})),a.d(n,"default",(function(){return b}));a(51),a(24),a(19),a(20),a(52),a(0);var o=a(227);function t(){return(t=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e}).apply(this,arguments)}var r={id:"primeros pasos",title:"Primeros pasos",sidebar_label:"Primeros pasos"},i=[{value:"Introducci\xf3n",id:"introducci\xf3n",children:[{value:"Requisitos",id:"requisitos",children:[]},{value:"Instalaci\xf3n",id:"instalaci\xf3n",children:[]}]},{value:"Iniciando",id:"iniciando",children:[{value:"Discord Client",id:"discord-client",children:[]},{value:"Recibiendo mensajes",id:"recibiendo-mensajes",children:[]}]},{value:"Archivo de Configuraci\xf3n",id:"archivo-de-configuraci\xf3n",children:[{value:"config.json",id:"configjson",children:[]},{value:"Utilizando config.json",id:"utilizando-configjson",children:[]}]},{value:"CommandBot",id:"commandbot",children:[]}],l={rightToc:i},c="wrapper";function b(e){var n=e.components,a=function(e,n){if(null==e)return{};var a,o,t={},r=Object.keys(e);for(o=0;o<r.length;o++)a=r[o],n.indexOf(a)>=0||(t[a]=e[a]);return t}(e,["components"]);return Object(o.b)(c,t({},l,a,{components:n,mdxType:"MDXLayout"}),Object(o.b)("h1",{id:"\xedndice"},"\xcdndice"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",t({parentName:"li"},{href:"#introducci%C3%B3n"}),"Introducci\xf3n")," - Introducci\xf3n de la gema ",Object(o.b)("inlineCode",{parentName:"li"},"discordrb")," y preparaci\xf3n del entorno de trabajo.\n",Object(o.b)("em",{parentName:"li"}," ",Object(o.b)("a",t({parentName:"em"},{href:"#requisitos"}),"Requisitos")," - Software necesario para empezar a utilizar ",Object(o.b)("inlineCode",{parentName:"em"},"discordrb"),".\n")," ",Object(o.b)("a",t({parentName:"li"},{href:"#instalacion"}),"Instalaci\xf3n")," - Instalaci\xf3n de la gema."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",t({parentName:"li"},{href:"#primer-bot"}),"Primer bot")," - Tutorial b\xe1sico para la creaci\xf3n de un bot.\n",Object(o.b)("em",{parentName:"li"}," ",Object(o.b)("a",t({parentName:"em"},{href:"#discord-client"}),"Discord Client")," - Poniendo en l\xednea el bot.\n")," ",Object(o.b)("a",t({parentName:"li"},{href:"#recibiendo-mensajes"}),"Recibiendo Mensajes")," - Recibiendo y enviando mensajes b\xe1sicos."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",t({parentName:"li"},{href:"#archivo-de-configuraci%C3%B3n"}),"Archivo de Configuraci\xf3n")," - Utilizando un archivo externo para evitar exponer informaci\xf3n personal.\n",Object(o.b)("em",{parentName:"li"}," ",Object(o.b)("a",t({parentName:"em"},{href:"#config.json"}),"config.json")," - Creando .json para almacenar informaci\xf3n.\n")," ",Object(o.b)("a",t({parentName:"li"},{href:"#utilizando-json"}),"Utilizando config.json")," - Utilizando en el c\xf3digo la informaci\xf3n almacenada en config.json."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",t({parentName:"li"},{href:"#commandbot"}),"CommandBot")," - Utilizando CommandBot, el handler de comandos nativo de ",Object(o.b)("inlineCode",{parentName:"li"},"discordrb"),".\n",Object(o.b)("em",{parentName:"li"}," ",Object(o.b)("a",t({parentName:"em"},{href:"#utilizando-argumentos"}),"Utilizando argumentos")," - El concepto de argumentos.\n")," ",Object(o.b)("a",t({parentName:"li"},{href:"#atributos-de-comando"}),"Atributos de comando")," - Herramientas de mejora para nuestros comandos.\n* ",Object(o.b)("a",t({parentName:"li"},{href:"#comando-help"}),"Comando help")," - Conociendo el comando ",Object(o.b)("inlineCode",{parentName:"li"},"help")," de ",Object(o.b)("inlineCode",{parentName:"li"},"discordrb"),".")),Object(o.b)("h2",{id:"introducci\xf3n"},"Introducci\xf3n"),Object(o.b)("p",null,Object(o.b)("a",t({parentName:"p"},{href:"https://github.com/meew0/discordrb/",title:"Repositorio en GitHub de Discordrb"}),"Discordrb")," es una gema para ",Object(o.b)("a",t({parentName:"p"},{href:"https://www.ruby-lang.org/es/",title:"Web oficial de Ruby"}),"Ruby")," hecha para facilitar el uso de ",Object(o.b)("a",t({parentName:"p"},{href:"https://discordapp.com/developers/docs/intro",title:"Discord API Documentation"}),"Discord API"),"."),Object(o.b)("p",null,"Fue desarrollada por ",Object(o.b)("a",t({parentName:"p"},{href:"https://github.com/meew0",title:"Perfil en GitHub de meew0"}),"meew0")),Object(o.b)("h3",{id:"requisitos"},"Requisitos"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",t({parentName:"li"},{href:"###Ruby"}),"Ruby")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",t({parentName:"li"},{href:"###gem-y-bundler"}),"gem y Bundler")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",t({parentName:"li"},{href:"###software-para-soporte-de-audio"}),"Software para soporte de audio"))),Object(o.b)("h4",{id:"ruby"},"Ruby"),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"Ruby")," es un lenguaje de programaci\xf3n orientado a objetos din\xe1mico y de c\xf3digo abierto enfocado en la simplicidad y productividad."),Object(o.b)("p",null,"Para descargarlo, dir\xedjase al apartado de descargas en la ",Object(o.b)("a",t({parentName:"p"},{href:"https://www.ruby-lang.org/es/downloads/",title:"Descargar Ruby"}),"web oficial")," y elija la versi\xf3n estable/recomendada ","(",Object(o.b)("inlineCode",{parentName:"p"},"2.6.3")," en el momento que se escribi\xf3 esta gu\xeda",")"),Object(o.b)("h4",{id:"gem-y-bundler"},"gem y bundler"),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"gem")," es el servicio encargado de manejar las gemas de Ruby desarrollados por la comunidad, consiste en un comando ","(","instalado junto con Ruby",")"," que nos permite instalar y mantener actualizada cualquier gema alojada en su base de datos."),Object(o.b)("p",null,"Alternativamente, ",Object(o.b)("inlineCode",{parentName:"p"},"bundler")," es una alternativa al package manager ",Object(o.b)("inlineCode",{parentName:"p"},"gem"),", ",Object(o.b)("inlineCode",{parentName:"p"},"bundler")," es una salida del infierno de la dependencia y garantiza que las gemas que necesita est\xe9n presentes en el desarrollo, la puesta en escena y la producci\xf3n."),Object(o.b)("p",null,"En esta gu\xeda, utilizaremos ambos package managers, ambos funcionan de distinta manera, pero descuida, son totalmente sencillos!"),Object(o.b)("p",null,"Para instalar bundler, debemos utilizar el siguiente comando ",Object(o.b)("strong",{parentName:"p"},"(ya debemos tener Ruby instalado)"),": ",Object(o.b)("a",t({parentName:"p"},{href:"https://bundler.io/man/bundle-install.1.html,",title:"Documentaci\xf3n oficial de Bundler"}),"Bundler docs")),Object(o.b)("pre",null,Object(o.b)("code",t({parentName:"pre"},{className:"language-sh"}),"gem install bundler\n")),Object(o.b)("h4",{id:"software-para-soporte-de-audio"},"Software para soporte de audio"),Object(o.b)("p",null,"Si planea utilizar alguna funci\xf3n que requiera audio (reproducir m\xfasica en un canal de voz por ejemplo), necesitar\xe1 instalar algunas gemas adicionales:"),Object(o.b)("p",null,"Nota: En Windows si desea utilizar la funci\xf3n de voz, su versi\xf3n de Ruby debe ser 32bits (x86), de lo contrario, Opus no funcionar\xe1."),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Software:"),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"Libsodium ",Object(o.b)("a",t({parentName:"li"},{href:"https://github.com/meew0/discordrb/wiki/Installing-libsodium",title:"Instalaci\xf3n de Libsodium por meew0"}),"Instalaci\xf3n Libsodium")),Object(o.b)("li",{parentName:"ul"},"Una distribuci\xf3n compilada de libopus ",Object(o.b)("a",t({parentName:"li"},{href:"https://github.com/meew0/discordrb/wiki/Installing-libopus",title:"Instalaci\xf3n de Libopus por meew0"}),"Instalaci\xf3n Libopus")),Object(o.b)("li",{parentName:"ul"},"FFmpeg")),Object(o.b)("pre",{parentName:"li"},Object(o.b)("code",t({parentName:"pre"},{className:"language-console"}),"gem install ffmpeg\n")))),Object(o.b)("h3",{id:"instalaci\xf3n"},"Instalaci\xf3n"),Object(o.b)("p",null,"Para empezar a utilizar ",Object(o.b)("inlineCode",{parentName:"p"},"discordrb")," necesitar\xe1 crear una carpeta donde estar\xe1n ubicados los archivos necesarios para el funcionamiento del bot."),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Windows:"),"\nLuego de esto, deber\xe1 abrir el ",Object(o.b)("inlineCode",{parentName:"li"},"cmd")," ","(",'Win + R y escriba "cmd" en ejecutar',")"," y abrir\xe1 la ruta donde se encuentra la carpeta con el comando ",Object(o.b)("inlineCode",{parentName:"li"},"cd"),", ejemplo:")),Object(o.b)("pre",null,Object(o.b)("code",t({parentName:"pre"},{className:"language-console"}),"cd desktop/bot\n")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Linux:"),"\nLuego de esto, deber\xe1 abrir la ",Object(o.b)("inlineCode",{parentName:"li"},"terminal")," ","(","Aplicaciones\xbbAccesorios\xbbTerminal",")"," y abrir\xe1 la ruta donde se encuentra la carpeta con el comando ",Object(o.b)("inlineCode",{parentName:"li"},"cd"),", ejemplo:")),Object(o.b)("pre",null,Object(o.b)("code",t({parentName:"pre"},{className:"language-console"}),"cd desktop/bot\n")),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},Object(o.b)("strong",{parentName:"p"},"Consejo:")," Puede escribir ",Object(o.b)("inlineCode",{parentName:"p"},"cmd")," en el buscador de carpetas para abrir una consola.")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Utilizando Bundler:"),"\nHecho lo anterior, solo debe ejecutar el siguiente comando que crear\xe1 un archivo Gemfile que contendr\xe1 las gemas necesarias del bot. El contenido que trae por defecto puede eliminarse.")),Object(o.b)("pre",null,Object(o.b)("code",t({parentName:"pre"},{className:"language-console"}),"bundle init\n")),Object(o.b)("pre",null,Object(o.b)("code",t({parentName:"pre"},{}),'* Abrimos el Gemfile y colocamos la estructura, ejemplo:\n```rb\nsource "https://rubygems.org/" #Este es el source del cual se descargar\xe1n las gemas.\n\ngem "discordrb" #Ac\xe1 se solicita la gema de discordrb.\n```\n* Luego, instalamos las gemas del Gemfile con el siguiente comando:\n\n```console\nbundle install #Esto instalar\xe1 todas las gemas requeridas en el Gemfile y crear\xe1 un archivo Gemfile.lock\n```\n')),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Utilizando gem:"),"\nHecho lo anterior, solo debe ejecutar el siguiente comando:")),Object(o.b)("pre",null,Object(o.b)("code",t({parentName:"pre"},{className:"language-console"}),"#Linux/MacOS\ngem install discordrb\n\n#Windows\ngem install discordrb --platform=ruby\n")),Object(o.b)("p",null,"Si recibe este error al instalar la gema:"),Object(o.b)("pre",null,Object(o.b)("code",t({parentName:"pre"},{className:"language-console"}),"Error: Error installing discordrb:\n       The 'websocket-driver' native gem requires installed build tools.\n")),Object(o.b)("p",null,"Es porque no tiene el Devkit instalado el cual es necesario para construir extensiones nativas."),Object(o.b)("p",null,"De esta manera, se empezar\xe1 a instalar ",Object(o.b)("inlineCode",{parentName:"p"},"discordrb")," con todas sus dependencias en el directorio seleccionado."),Object(o.b)("p",null,"Si no hubo ning\xfan mensaje de error al finalizar la instalaci\xf3n, es hora de programar su bot."),Object(o.b)("h2",{id:"iniciando"},"Iniciando"),Object(o.b)("p",null,"Una vez explicados los puntos b\xe1sicos y teniendo todo listo, podemos empezar a usar ",Object(o.b)("inlineCode",{parentName:"p"},"discordrb"),", esta secci\xf3n cubrir\xe1 los primeros pasos en la creaci\xf3n de un bot (Eventos, CommandBot)."),Object(o.b)("p",null,"Primero vamos a crear un nuevo archivo con extensi\xf3n ",Object(o.b)("inlineCode",{parentName:"p"},".rb")," (ej: ",Object(o.b)("inlineCode",{parentName:"p"},"BotRuby.rb"),")."),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},Object(o.b)("strong",{parentName:"p"},"Importante:"),' en el Tipo de archivo al guardar debe elegir "Todos los archivos", de otra manera, es posible que se guarde como .txt.')),Object(o.b)("p",null,"Antes de nada, al igual que con cualquier otra gema de ",Object(o.b)("inlineCode",{parentName:"p"},"Ruby"),", se precisa de la funci\xf3n ",Object(o.b)("inlineCode",{parentName:"p"},"require 'gem'")," para empezar a trabajar con ella, as\xed que vamos a declarar una variable que contenga ",Object(o.b)("inlineCode",{parentName:"p"},"discordrb"),"."),Object(o.b)("pre",null,Object(o.b)("code",t({parentName:"pre"},{className:"language-ruby"}),"require 'discordrb' #Con esto solicitamos la gema discordrb en el archivo del bot.\n")),Object(o.b)("h3",{id:"discord-client"},"Discord Client"),Object(o.b)("p",null,"La clase ",Object(o.b)("a",t({parentName:"p"},{href:"%22Bot%22"}),Object(o.b)("inlineCode",{parentName:"a"},"Bot"))," es el principal punto de interacci\xf3n de ",Object(o.b)("inlineCode",{parentName:"p"},"discordrb")," con ",Object(o.b)("inlineCode",{parentName:"p"},"Discord API"),", primero deber\xe1 crear una nueva instancia de ",Object(o.b)("inlineCode",{parentName:"p"},"Discord.Client")," e iniciar sesi\xf3n con el token obtenido en ",Object(o.b)("a",t({parentName:"p"},{href:"https://discordapp.com/developers/applications/me",title:"Discord Developers"}),"Mis aplicaciones"),". Con ",Object(o.b)("inlineCode",{parentName:"p"},"bot.run")," iniciamos el bot."),Object(o.b)("pre",null,Object(o.b)("code",t({parentName:"pre"},{className:"language-rb"}),"bot = Discordrb::Bot.new token: '<token>' #Declaraci\xf3n del cliente y token a utilizar.\n\nbot.run\n")),Object(o.b)("p",null,"Luego para comprobar que todo haya salido bien, utilizaremos el evento ",Object(o.b)("a",t({parentName:"p"},{href:"https://www.rubydoc.info/gems/discordrb/Discordrb/EventContainer#ready-instance_method",title:"EventContainer#ready-instance_method"}),Object(o.b)("inlineCode",{parentName:"a"},"ready")),", que es emitido en cuanto nuestro bot est\xe1 en l\xednea."),Object(o.b)("pre",null,Object(o.b)("code",t({parentName:"pre"},{className:"language-rb"}),'bot.ready() do |ready|\n  puts "Estoy en l\xednea!"\nend\n')),Object(o.b)("p",null,"Luego ejecute el comando ",Object(o.b)("inlineCode",{parentName:"p"},"ruby")," seguido del nombre del archivo de su bot, ejemplo:"),Object(o.b)("pre",null,Object(o.b)("code",t({parentName:"pre"},{className:"language-console"}),"ruby bot.rb\n")),Object(o.b)("p",null,'Si se imprime en la consola el mensaje "Estoy en l\xednea!", todo sali\xf3 bien.'),Object(o.b)("h3",{id:"recibiendo-mensajes"},"Recibiendo mensajes"),Object(o.b)("p",null,"Ahora que nuestro bot est\xe1 en linea, comprobaremos su funcionamiento intentando que reciba y env\xede mensajes, para ello precisamos del evento ",Object(o.b)("a",t({parentName:"p"},{href:"https://www.rubydoc.info/github/meew0/discordrb/Discordrb/Message",title:"Discordrb::Message"}),Object(o.b)("inlineCode",{parentName:"a"},"message")),", este emitir\xe1 un ",Object(o.b)("a",t({parentName:"p"},{href:"https://www.rubydoc.info/github/meew0/discordrb/Discordrb/Message",title:"Message"}),"objeto")," con todas las propiedades del mensaje (autor, contenido, canal)."),Object(o.b)("pre",null,Object(o.b)("code",t({parentName:"pre"},{className:"language-rb"}),"bot.message() do |msg|\n    puts (msg.author.tag, msg.content);\nend\n")),Object(o.b)("p",null,"En este ejemplo, se estar\xeda imprimiendo en la consola el autor y contenido de cada mensaje que presencie el bot, si queremos que ignore el resto de mensajes exceptuando el que usted le indique, deber\xe1 crear una condici\xf3n que compare el contenido de los mensajes."),Object(o.b)("pre",null,Object(o.b)("code",t({parentName:"pre"},{className:"language-rb"}),'if message.content.start_with("ping")\n    message.send_message("Pong!")\nend\n')),Object(o.b)("p",null,"En este ejemplo, ",Object(o.b)("inlineCode",{parentName:"p"},"message.content")," representar\xeda el contenido del mensaje enviado, utilizando ",Object(o.b)("inlineCode",{parentName:"p"},"start_with"),' comprobamos que el mensaje empiece por "ping", de esta manera, solo si se cumple esa condici\xf3n, enviar\xeda un mensaje que contenga "Pong".'),Object(o.b)("h2",{id:"archivo-de-configuraci\xf3n"},"Archivo de Configuraci\xf3n"),Object(o.b)("p",null,"Puede que quieras ense\xf1arle tu c\xf3digo a alguien o subirlo a un repositorio en GitHub, pero este contiene el token de tu bot, alguna API key o cuenta personal, para evitar exponer esta informaci\xf3n y ya de paso poder acceder a esta m\xe1s f\xe1cilmente, podemos utilizar un archivo de configuraci\xf3n."),Object(o.b)("h3",{id:"configjson"},"config.json"),Object(o.b)("p",null,"Lo primero que har\xe1, ser\xe1 crear un archivo en la carpeta de nuestro bot y le colocamos el nombre ",Object(o.b)("inlineCode",{parentName:"p"},"config.json"),"(no necesariamente debe ser ese nombre, pero la extensi\xf3n s\xed debe ser .json)."),Object(o.b)("p",null,"El contenido del archivo debe ser similar al siguiente:"),Object(o.b)("pre",null,Object(o.b)("code",t({parentName:"pre"},{className:"language-json"}),'{\n    "prefix": "!",\n    "token": "Token",\n    "ownerID": "159158446304788481"\n}\n')),Object(o.b)("h3",{id:"utilizando-configjson"},"Utilizando config.json"),Object(o.b)("p",null,"El config.json lo utilizaremos con un ",Object(o.b)("inlineCode",{parentName:"p"},"read()"),", ",Object(o.b)("inlineCode",{parentName:"p"},"parse()")," de la siguiente manera:"),Object(o.b)("pre",null,Object(o.b)("code",t({parentName:"pre"},{className:"language-rb"}),"#Tambi\xe9n debemos instalar y solicitar json.\n\n#Gemfile:\ngem 'json'\n\n#gem:\ngem install 'json'\n\nrequire 'json'\nconfig_file = File.read('./config.json')\nconfig = JSON.parse(config_file)\ntoken = config['token']\nconfig['prefix']\n")),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},Object(o.b)("strong",{parentName:"p"},"Importante:")," el ",Object(o.b)("inlineCode",{parentName:"p"},"./")," para que detecte que est\xe1 en un directorio y no es una gema.")),Object(o.b)("p",null,"Y luego solo queda implementarlo en el c\xf3digo"),Object(o.b)("pre",null,Object(o.b)("code",t({parentName:"pre"},{className:"language-rb"}),"Discordrb::Bot.new token: token\n")),Object(o.b)("h2",{id:"commandbot"},"CommandBot"),Object(o.b)("p",null,"Discord.rb posee un sistema que facilita la creaci\xf3n de comandos, permitiendo a\xf1adir distintos par\xe1metros como cooldown, permisos, y ahorr\xe1ndote l\xedneas de c\xf3digo.\nPara comenzar a utilizar ",Object(o.b)("inlineCode",{parentName:"p"},"CommandBot")," debemos realizar peque\xf1as modificaciones en la definici\xf3n del ",Object(o.b)("inlineCode",{parentName:"p"},"cliente"),"."),Object(o.b)("pre",null,Object(o.b)("code",t({parentName:"pre"},{className:"language-rb"}),"bot = Discordrb::Commands::CommandBot.new token: '<token>', client_id: ID_BOT, prefix: '!'\n")),Object(o.b)("p",null,"Como ver\xe1n la definici\xf3n de ",Object(o.b)("inlineCode",{parentName:"p"},"bot")," cambi\xf3 dr\xe1sticamente. Ahora podemos a\xf1adirle m\xe1s par\xe1metros y condiciones que se cumplir\xe1n en los comandos que iremos agregando."),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"Puede ver todos los par\xe1metros ",Object(o.b)("a",t({parentName:"p"},{href:"https://www.rubydoc.info/gems/discordrb/Discordrb/Commands/CommandBot"}),"aqu\xed"))),Object(o.b)("p",null,"Ahora definiremos un comando b\xe1sico, el ",Object(o.b)("inlineCode",{parentName:"p"},"ping"),"."),Object(o.b)("pre",null,Object(o.b)("code",t({parentName:"pre"},{className:"language-rb"}),'bot.command :ping do |event|\n  return "Pong!"\nend\n')),Object(o.b)("p",null,"Ahora utilizamos ",Object(o.b)("inlineCode",{parentName:"p"},"!ping")," y el bot deber\xeda responder ",Object(o.b)("inlineCode",{parentName:"p"},"Pong!"),"."),Object(o.b)("h4",{id:"utilizando-argumentos"},"Utilizando argumentos"),Object(o.b)("p",null,"Podemos definir argumentos para a\xf1adir m\xe1s utilidades a nuestro bot. Estos ser\xe1n \xfatiles para crear comandos m\xe1s complejos o con m\xfaltiples funciones."),Object(o.b)("pre",null,Object(o.b)("code",t({parentName:"pre"},{className:"language-rb"}),"bot.command :say do |event, args|\n  return args\nend\n")),Object(o.b)("p",null,"En el ejemplo de arriba definimos un nuevo comando llamado ",Object(o.b)("inlineCode",{parentName:"p"},"say")," el cual repetir\xe1 la primera palabra que escribas seguida del comando. Deber\xeda ser algo como esto: ",Object(o.b)("inlineCode",{parentName:"p"},"!say hola"),", entonces el bot retornaria ",Object(o.b)("inlineCode",{parentName:"p"},"hola"),"."),Object(o.b)("p",null,"Pero supongamos que el usuario escribe ",Object(o.b)("inlineCode",{parentName:"p"},"!say hola soy lau"),", el bot solo retornar\xeda ",Object(o.b)("inlineCode",{parentName:"p"},"hola")," y no queremos eso, as\xed que en donde definimos ",Object(o.b)("inlineCode",{parentName:"p"},"args")," agregaremos un ",Object(o.b)("inlineCode",{parentName:"p"},"*")," delante."),Object(o.b)("pre",null,Object(o.b)("code",t({parentName:"pre"},{className:"language-rb"}),'bot.command :say do |event, *args|\n  return args.join(" ")\nend\n')),Object(o.b)("p",null,"Al agregar el ",Object(o.b)("inlineCode",{parentName:"p"},"*")," delante de args, estamos definiendo que ",Object(o.b)("inlineCode",{parentName:"p"},"args")," ser\xe1 un ",Object(o.b)("inlineCode",{parentName:"p"},"array"),". Con ",Object(o.b)("inlineCode",{parentName:"p"},'join(" ")')," estamos uniendo el array con un espacio en blanco en un string.\nUna vez explicado el funcionamiento, si utilizamos ",Object(o.b)("inlineCode",{parentName:"p"},"!say Hola soy lau")," deber\xeda enviarnos ",Object(o.b)("inlineCode",{parentName:"p"},"Hola soy lau"),"."),Object(o.b)("h4",{id:"atributos-de-comando"},"Atributos de comando"),Object(o.b)("p",null,"Ya vimos que definir comandos no es ninguna ciencia compleja, as\xed que ahora les a\xf1adiremos m\xe1s contenido con los ",Object(o.b)("inlineCode",{parentName:"p"},"atributos"),". Estos atributos permitir\xe1n que nuestros comandos tengan m\xe1s funciones."),Object(o.b)("pre",null,Object(o.b)("code",t({parentName:"pre"},{className:"language-rb"}),'bot.command :say, permission_message: "No puedes usar esto", required_permissions: [:KICK_MEMBERS], description: "Repetir\xe9 lo que digas", usage: "args" do |event, *args|\n  return args.join(" ")\nend\n')),Object(o.b)("p",null,"Como ver\xe1n la definici\xf3n del comando se extendi\xf3 considerablemente. Perm\xedtame explicar cada atributo punto por punto."),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"permission_message")," ser\xe1 el mensaje de retorno cuando el usuario no tenga permisos suficientes para utilizar el comando."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"required_permissions")," es un array que contiene los permisos necesarios para utilizar el comando."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"description")," ser\xe1 el mensaje mostrado en el comando ",Object(o.b)("a",t({parentName:"li"},{href:"#comando-help"}),"help")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"usage")," es el uso del comando mostrado en el ",Object(o.b)("inlineCode",{parentName:"li"},"help"),".")),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},Object(o.b)("strong",{parentName:"p"},"Nota:")," Puedes ver todos los atributos en ",Object(o.b)("a",t({parentName:"p"},{href:"https://www.rubydoc.info/gems/discordrb/Discordrb/Commands/CommandContainer"}),"CommandContainer"),".")),Object(o.b)("h4",{id:"comando-help"},"Comando help"),Object(o.b)("p",null,"Discordrb nos brinda un comando ",Object(o.b)("inlineCode",{parentName:"p"},"help")," nativo. No hace falta escribir ni ",Object(o.b)("strong",{parentName:"p"},"una sola l\xednea de c\xf3digo")," para comenzar a usar este comando, simplemente tipea tu ",Object(o.b)("inlineCode",{parentName:"p"},"prefijo")," seguido de ",Object(o.b)("inlineCode",{parentName:"p"},"help"),"."),Object(o.b)("p",null,"Muchos de los par\xe1metros que especificaras mientras creas tus comandos ser\xe1n mostrados en el comando help. Por ejemplo, el par\xe1metro ",Object(o.b)("inlineCode",{parentName:"p"},"description")," mostrar\xe1 una descripci\xf3n breve del comando."),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},Object(o.b)("strong",{parentName:"p"},"Nota:")," Puedes sobreescribir este comando definiendo un nuevo comando con el nombre ",Object(o.b)("inlineCode",{parentName:"p"},"help"),".")),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},Object(o.b)("strong",{parentName:"p"},"Nota 2:")," Hasta el momento no he descubierto forma de acceder a la gema para traducir el comando.")))}b.isMDXComponent=!0},227:function(e,n,a){"use strict";a.d(n,"a",(function(){return l})),a.d(n,"b",(function(){return d}));var o=a(0),t=a.n(o),r=t.a.createContext({}),i=function(e){var n=t.a.useContext(r),a=n;return e&&(a="function"==typeof e?e(n):Object.assign({},n,e)),a},l=function(e){var n=i(e.components);return t.a.createElement(r.Provider,{value:n},e.children)};var c="mdxType",b={inlineCode:"code",wrapper:function(e){var n=e.children;return t.a.createElement(t.a.Fragment,{},n)}},s=Object(o.forwardRef)((function(e,n){var a=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,c=function(e,n){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&-1===n.indexOf(o)&&(a[o]=e[o]);return a}(e,["components","mdxType","originalType","parentName"]),s=i(a),d=o,p=s[l+"."+d]||s[d]||b[d]||r;return a?t.a.createElement(p,Object.assign({},{ref:n},c,{components:a})):t.a.createElement(p,Object.assign({},{ref:n},c))}));function d(e,n){var a=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var r=a.length,i=new Array(r);i[0]=s;var l={};for(var b in n)hasOwnProperty.call(n,b)&&(l[b]=n[b]);l.originalType=e,l[c]="string"==typeof e?e:o,i[1]=l;for(var d=2;d<r;d++)i[d]=a[d];return t.a.createElement.apply(null,i)}return t.a.createElement.apply(null,a)}s.displayName="MDXCreateElement"}}]);