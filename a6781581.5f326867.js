(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{184:function(e,n,a){"use strict";a.r(n),a.d(n,"frontMatter",(function(){return r})),a.d(n,"rightToc",(function(){return i})),a.d(n,"default",(function(){return s}));a(51),a(24),a(19),a(20),a(52),a(0);var t=a(221);function o(){return(o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e}).apply(this,arguments)}var r={id:"eris-2",title:"Primeros pasos",sidebar_label:"Primeros Pasos"},i=[{value:"Introducci\xf3n",id:"introducci\xf3n",children:[{value:"Requisitos",id:"requisitos",children:[]},{value:"Instalaci\xf3n",id:"instalaci\xf3n",children:[]}]},{value:"Primer Bot",id:"primer-bot",children:[{value:"Discord Client",id:"discord-client",children:[]},{value:"Recibiendo mensajes",id:"recibiendo-mensajes",children:[]}]},{value:"Comandos",id:"comandos",children:[]}],c={rightToc:i},l="wrapper";function s(e){var n=e.components,a=function(e,n){if(null==e)return{};var a,t,o={},r=Object.keys(e);for(t=0;t<r.length;t++)a=r[t],n.indexOf(a)>=0||(o[a]=e[a]);return o}(e,["components"]);return Object(t.b)(l,o({},c,a,{components:n,mdxType:"MDXLayout"}),Object(t.b)("h1",{id:"\xedndice"},"\xcdndice"),Object(t.b)("ul",null,Object(t.b)("li",{parentName:"ul"},Object(t.b)("a",o({parentName:"li"},{href:"#introducci%C3%B3n"}),"Introducci\xf3n")," - Introducci\xf3n a ",Object(t.b)("inlineCode",{parentName:"li"},"eris")," y preparaci\xf3n del entorno de trabajo.",Object(t.b)("ul",{parentName:"li"},Object(t.b)("li",{parentName:"ul"},Object(t.b)("a",o({parentName:"li"},{href:"#requisitos"}),"Requisitos")," - Software necesario para utilizar ",Object(t.b)("inlineCode",{parentName:"li"},"eris"),"."),Object(t.b)("li",{parentName:"ul"},Object(t.b)("a",o({parentName:"li"},{href:"#instalaci%C3%B3n"}),"Instalaci\xf3n")," - Instalaci\xf3n del paquete."))),Object(t.b)("li",{parentName:"ul"},Object(t.b)("a",o({parentName:"li"},{href:"#primer-bot"}),"Primer bot")," - Tutorial introductorio para desarrollar tu primer bot.",Object(t.b)("ul",{parentName:"li"},Object(t.b)("li",{parentName:"ul"},Object(t.b)("a",o({parentName:"li"},{href:"#discord-client"}),"Discord Client")," - Poniendo en l\xednea nuestro bot."),Object(t.b)("li",{parentName:"ul"},Object(t.b)("a",o({parentName:"li"},{href:"#recibiendo-mensaje"}),"Recibiendo mensajes")," - Recibiendo y enviando mensajes b\xe1sicos."),Object(t.b)("li",{parentName:"ul"},Object(t.b)("a",o({parentName:"li"},{href:"#comandos"}),"Comandos")," - Creando comandos b\xe1sicos con argumentos.")))),Object(t.b)("h2",{id:"introducci\xf3n"},"Introducci\xf3n"),Object(t.b)("h3",{id:"requisitos"},"Requisitos"),Object(t.b)("ul",null,Object(t.b)("li",{parentName:"ul"},Object(t.b)("a",o({parentName:"li"},{href:"###node.js"}),"Node.js")),Object(t.b)("li",{parentName:"ul"},Object(t.b)("a",o({parentName:"li"},{href:"###software-para-soporte-de-audio"}),"Software para soporte de audio"))),Object(t.b)("h4",{id:"nodejs"},"Node.js"),Object(t.b)("p",null,Object(t.b)("inlineCode",{parentName:"p"},"Node.js")," es un entorno de ejecuci\xf3n, en este es posible ejecutar c\xf3digo escrito en ",Object(t.b)("inlineCode",{parentName:"p"},"JavaScript")," desde un servidor en lugar de un navegador."),Object(t.b)("p",null,"Para descargarlo, dir\xedjase al apartado de descargas en la ",Object(t.b)("a",o({parentName:"p"},{href:"https://nodejs.org/en/download/",title:"Descargar node.js"}),"web oficial")," y elija la versi\xf3n estable/recomendada ","(",Object(t.b)("inlineCode",{parentName:"p"},"8.11.1")," en el momento que se escribi\xf3 esta gu\xeda",")"),Object(t.b)("h5",{id:"npm"},"npm"),Object(t.b)("p",null,Object(t.b)("a",o({parentName:"p"},{href:"https://www.npmjs.com",title:"Web oficial de npm"}),Object(t.b)("inlineCode",{parentName:"a"},"NPM"))," es el servicio encargado de manejar los m\xf3dulos de Node.js desarrollados por la comunidad, consiste en un comando ","(","instalado junto con node",")"," que nos permite instalar y mantener actualizado cualquier m\xf3dulo alojado en su base de datos."),Object(t.b)("h4",{id:"software-para-soporte-de-audio"},"Software para soporte de audio"),Object(t.b)("p",null,"Si planea utilizar alguna funci\xf3n que requiera audio (reproducir m\xfasica en un canal de voz por ejemplo), necesitar\xe1 instalar algunos m\xf3dulos adicionales:"),Object(t.b)("ul",null,Object(t.b)("li",{parentName:"ul"},Object(t.b)("p",{parentName:"li"},Object(t.b)("strong",{parentName:"p"},"En PowerShell con permisos de administrador:")),Object(t.b)("ul",{parentName:"li"},Object(t.b)("li",{parentName:"ul"},Object(t.b)("inlineCode",{parentName:"li"},"npm i -g --production windows-build-tools")))),Object(t.b)("li",{parentName:"ul"},Object(t.b)("p",{parentName:"li"},Object(t.b)("strong",{parentName:"p"},"En la carpeta que contendr\xe1 el bot:")),Object(t.b)("ul",{parentName:"li"},Object(t.b)("li",{parentName:"ul"},Object(t.b)("inlineCode",{parentName:"li"},"npm i ffmpeg-binaries")),Object(t.b)("li",{parentName:"ul"},Object(t.b)("inlineCode",{parentName:"li"},"npm i node-opus")," (En caso de que ocurra alg\xfan error, intente con ",Object(t.b)("inlineCode",{parentName:"li"},"npm i opusscript"),")")))),Object(t.b)("h3",{id:"instalaci\xf3n"},"Instalaci\xf3n"),Object(t.b)("p",null,"Para empezar a utilizar ",Object(t.b)("inlineCode",{parentName:"p"},"eris")," necesitar\xe1 crear una carpeta donde estar\xe1n ubicados los archivos necesarios para el funcionamiento del bot."),Object(t.b)("p",null,"Luego de esto, deber\xe1 abrir el ",Object(t.b)("inlineCode",{parentName:"p"},"cmd")," ","(",'Win + R y escriba "cmd" en ejecutar',")"," y abrir\xe1 la ruta donde se encuentra la carpeta con el comando ",Object(t.b)("inlineCode",{parentName:"p"},"cd"),", ejemplo:"),Object(t.b)("pre",null,Object(t.b)("code",o({parentName:"pre"},{className:"language-console"}),"cd desktop/bot\n")),Object(t.b)("blockquote",null,Object(t.b)("p",{parentName:"blockquote"},Object(t.b)("strong",{parentName:"p"},"Consejo:")," Puede escribir ",Object(t.b)("inlineCode",{parentName:"p"},"cmd")," en el buscador de carpetas para abrir una consola.")),Object(t.b)("p",null,"Hecho lo anterior, solo debe ejecutar el siguiente comando: ",Object(t.b)("inlineCode",{parentName:"p"},"npm i eris"),".\nDe esta manera, se empezar\xe1 a instalar ",Object(t.b)("inlineCode",{parentName:"p"},"eris")," con todas sus dependencias en el directorio seleccionado."),Object(t.b)("p",null,"Si no hubo ning\xfan mensaje de error al finalizar la instalaci\xf3n, es hora de programar un bot."),Object(t.b)("h2",{id:"primer-bot"},"Primer Bot"),Object(t.b)("p",null,"Una vez explicados los puntos b\xe1sicos y teniendo todo listo, podemos empezar a usar ",Object(t.b)("inlineCode",{parentName:"p"},"eris"),", esta secci\xf3n cubrir\xe1 los primeros pasos en la creaci\xf3n de un bot."),Object(t.b)("p",null,"En nuestra carpeta crearemos un archivo con extensi\xf3n ",Object(t.b)("inlineCode",{parentName:"p"},".js")," (Ejemplo: ",Object(t.b)("inlineCode",{parentName:"p"},"MiBot.js"),") y lo abriremos con cualquier editor de c\xf3digo."),Object(t.b)("p",null,"Antes de nada, al igual que con cualquier otro m\xf3dulo de ",Object(t.b)("inlineCode",{parentName:"p"},"Node"),", se precisa de la funci\xf3n ",Object(t.b)("inlineCode",{parentName:"p"},"require()")," para empezar a trabajar con \xe9l, as\xed que vamos a declarar una variable que contenga ",Object(t.b)("inlineCode",{parentName:"p"},"eris"),"."),Object(t.b)("pre",null,Object(t.b)("code",o({parentName:"pre"},{className:"language-js"}),'const Eris = require("eris");\n')),Object(t.b)("h3",{id:"discord-client"},"Discord Client"),Object(t.b)("p",null,"Esta clase es el punto principal de interacci\xf3n con la ",Object(t.b)("inlineCode",{parentName:"p"},"discord API"),". Debemos definirla y a su vez ingresar el token de nuestro bot.\nCon ",Object(t.b)("inlineCode",{parentName:"p"},"bot.connect()")," iniciaremos nuestro bot."),Object(t.b)("pre",null,Object(t.b)("code",o({parentName:"pre"},{className:"language-js"}),'const bot = new Eris("token");\n\nbot.connect()\n')),Object(t.b)("p",null,"Para comprobar que el arranque fue exitoso utilizaremos el evento ",Object(t.b)("inlineCode",{parentName:"p"},"ready")," que es emitido cuando nuestro bot se pone en l\xednea."),Object(t.b)("pre",null,Object(t.b)("code",o({parentName:"pre"},{className:"language-js"}),'bot.on("ready", () => {\n  console.log("Estoy list@!")\n});\n')),Object(t.b)("p",null,"Para iniciar nuestro bot debemos escribir el siguiente comando en nuestra consola."),Object(t.b)("pre",null,Object(t.b)("code",o({parentName:"pre"},{className:"language-console"}),"node MiBot.js\n")),Object(t.b)("p",null,"Si se imprime en la consola el mensaje ",Object(t.b)("inlineCode",{parentName:"p"},"Estoy list@!")," es porque todo sali\xf3 bien."),Object(t.b)("h3",{id:"recibiendo-mensajes"},"Recibiendo mensajes"),Object(t.b)("p",null,"Ahora que nuestro bot est\xe1 en linea, comprobaremos su funcionamiento intentando que reciba y env\xede mensajes, para ello precisamos del evento ",Object(t.b)("a",o({parentName:"p"},{href:"https://abal.moe/Eris/docs/Client#event-messageCreate"}),Object(t.b)("inlineCode",{parentName:"a"},"messageCreate")),", este emitir\xe1 un ",Object(t.b)("a",o({parentName:"p"},{href:"https://abal.moe/Eris/docs/Message"}),"objeto")," con todas las propiedades del mensaje (autor, contenido, canal, etc)."),Object(t.b)("p",null,"Por ejemplo, haremos que nuestro bot responda al ",Object(t.b)("inlineCode",{parentName:"p"},"mensaje ping"),"."),Object(t.b)("pre",null,Object(t.b)("code",o({parentName:"pre"},{className:"language-js"}),'bot.on("messageCreate", msg => {\n  if(msg.content.startsWith() === "ping"){\n    bot.createMessage(msg.channel.id, "Pong!");\n  }\n});\n')),Object(t.b)("p",null,"En este ejemplo, ",Object(t.b)("inlineCode",{parentName:"p"},"msg.content")," representar\xeda el contenido del mensaje enviado, utilizando ",Object(t.b)("inlineCode",{parentName:"p"},"startsWith()"),' comprobamos que el mensaje empiece por "ping", de esta manera, solo si se cumple esa condici\xf3n, enviar\xeda un mensaje que contenga "Pong".'),Object(t.b)("h2",{id:"comandos"},"Comandos"),Object(t.b)("blockquote",null,Object(t.b)("p",{parentName:"blockquote"},"Dejemos en claro que eris posee un ",Object(t.b)("inlineCode",{parentName:"p"},"handler de comandos nativo"),". Si quieres ahorrar tiempo o simplemente utilizar el ",Object(t.b)("inlineCode",{parentName:"p"},"CommandClient")," de eris ",Object(t.b)("a",o({parentName:"p"},{href:"eris-3"}),"salta a este paso"),".")),Object(t.b)("p",null,"Para empezar definiremos nuestro prefijo e ignoraremos los mensajes enviados por cualquier bot."),Object(t.b)("pre",null,Object(t.b)("code",o({parentName:"pre"},{className:"language-js"}),'const prefix = "!"\n\nif(message.author.bot) return;\n')),Object(t.b)("p",null,"Una vez echo esto, haremos que nuestro bot elimine el prefijo del mensaje, dejando solo el comando y tomaremos el resto del mensaje como ",Object(t.b)("strong",{parentName:"p"},"argumentos"),"."),Object(t.b)("pre",null,Object(t.b)("code",o({parentName:"pre"},{className:"language-js"}),"const args = message.content.slice(prefix.length).trim().split(/ +/g);\nconst command = args.shift().toLowerCase();\n")),Object(t.b)("p",null,"En la variable ",Object(t.b)("inlineCode",{parentName:"p"},"args")," tomamos el contenido del mensaje. Utilizando ",Object(t.b)("inlineCode",{parentName:"p"},"slice()")," eliminamos el prefijo, para luego con ",Object(t.b)("inlineCode",{parentName:"p"},"trim()")," eliminar posibles espacios en blanco. Con ",Object(t.b)("inlineCode",{parentName:"p"},"split(/ +/g)")," separamos el mensaje en espacios blanco, dejando solo un array."),Object(t.b)("p",null,"Luego con ",Object(t.b)("inlineCode",{parentName:"p"},"command")," definimos los comandos. Eliminamos el primer elemento de un array con ",Object(t.b)("inlineCode",{parentName:"p"},"shift()")," (en este caso el array es ",Object(t.b)("inlineCode",{parentName:"p"},"args"),"), y luego indicamos que el comando sea insensitivo al caso con ",Object(t.b)("inlineCode",{parentName:"p"},"toLowerCase()"),"."),Object(t.b)("pre",null,Object(t.b)("code",o({parentName:"pre"},{className:"language-js"}),'if (command === "mipais") {\n  bot.createMessage(msg.channel.id, "Tu pa\xeds es: "+args[0]);\n  return;\n}\n')),Object(t.b)("p",null,"En este ejemplo estamos creando un comando que devolver\xe1 el pa\xeds especificado por el usuario. Su uso ser\xeda ",Object(t.b)("inlineCode",{parentName:"p"},"!mipais Argentina"),", por lo que el bot devolver\xe1 ",Object(t.b)("inlineCode",{parentName:"p"},"Argentina"),". Este es un ejemplo b\xe1sico de como usar argumentos, puedes extenderte tanto como quieras y crear cosas muy interesantes."),Object(t.b)("p",null,"Hasta aqu\xed todo bien, pero si el usuario utilizar\xe1 dos argumentos (ej: ",Object(t.b)("inlineCode",{parentName:"p"},"!mipais Argentina Venezuela"),") solo retornar\xe1 ",Object(t.b)("inlineCode",{parentName:"p"},"Argentina"),". Para hacer que retorne todos los argumentos especificados utilizaremos ",Object(t.b)("inlineCode",{parentName:"p"},"join()"),"."),Object(t.b)("pre",null,Object(t.b)("code",o({parentName:"pre"},{className:"language-js"}),'if (command === "mipais") {\n  var content = args.join(" ");\n  bot.createMessage(msg.channel.send, "El contenido del mensaje es: "+content);\n  return;\n}\n')),Object(t.b)("p",null,"Entonces al utilizar ",Object(t.b)("inlineCode",{parentName:"p"},"!mipais Yo vivo en Argentina")," el bot enviar\xe1 ",Object(t.b)("inlineCode",{parentName:"p"},"Yo vivo en Argentina"),"."))}s.isMDXComponent=!0},221:function(e,n,a){"use strict";a.d(n,"a",(function(){return c})),a.d(n,"b",(function(){return p}));var t=a(0),o=a.n(t),r=o.a.createContext({}),i=function(e){var n=o.a.useContext(r),a=n;return e&&(a="function"==typeof e?e(n):Object.assign({},n,e)),a},c=function(e){var n=i(e.components);return o.a.createElement(r.Provider,{value:n},e.children)};var l="mdxType",s={inlineCode:"code",wrapper:function(e){var n=e.children;return o.a.createElement(o.a.Fragment,{},n)}},b=Object(t.forwardRef)((function(e,n){var a=e.components,t=e.mdxType,r=e.originalType,c=e.parentName,l=function(e,n){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&-1===n.indexOf(t)&&(a[t]=e[t]);return a}(e,["components","mdxType","originalType","parentName"]),b=i(a),p=t,d=b[c+"."+p]||b[p]||s[p]||r;return a?o.a.createElement(d,Object.assign({},{ref:n},l,{components:a})):o.a.createElement(d,Object.assign({},{ref:n},l))}));function p(e,n){var a=arguments,t=n&&n.mdxType;if("string"==typeof e||t){var r=a.length,i=new Array(r);i[0]=b;var c={};for(var s in n)hasOwnProperty.call(n,s)&&(c[s]=n[s]);c.originalType=e,c[l]="string"==typeof e?e:t,i[1]=c;for(var p=2;p<r;p++)i[p]=a[p];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,a)}b.displayName="MDXCreateElement"}}]);